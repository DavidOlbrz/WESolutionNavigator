<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>6.2-4 Topologische Iterierbarkeit & Proxy</title>
</head>
<body>
<script>
    // class made in task 2
    class Vorrang {

        constructor(input) {
            this.inputArray = input;
            this.sorted = new Set;
        }

        compare(a, b) {
            if (a[0] === b[1]) {
                return 1;
            } else if (a[1] === b[0]) {
                return -1;
            } else {
                return 0;
            }
        }

        topSort() {
            let array = this.inputArray;
            array.sort(this.compare);
            this.sorted = new Set;
            for (let x in array) {
                this.sorted.add(array[x][0]);
                if (x == array.length - 1) {
                    this.sorted.add(array[x][1]);
                }
            }
            return this.sorted;
        }

        [Symbol.iterator]() {
            let next = 0;
            let counter = 0;

            const iterator = {
                next() {
                    let result;
                    if (next < this.sorted.length) {
                        result = {value: next, done: false};
                        next++;
                        counter++;

                        return result;
                    } else {
                        return {value: counter, done: true};
                    }
                }
            }

            return iterator;
        }
    }

    function testTopSort() {
        const array = [["schlafen", "studieren"], ["essen", "studieren"], ["studieren", "prüfen"]];
        const topsort = new Vorrang(array);
        const sorted = topsort.topSort();
        console.assert(Array.from(sorted).toString() === "schlafen,essen,studieren,prüfen");
    }

    function testTopSortIterator() {
        const array = [["schlafen", "studieren"], ["essen", "studieren"], ["studieren", "prüfen"]];
        const iterator =
    }

    testTopSort();
</script>

<script>
    const deepCopy = (x) => Array.isArray(x)
        ? x.map(deepCopy)
        : typeof x === 'object'
            ? Object.fromEntries(Object.entries(x).map(([k, v]) => [k, deepCopy(v)]))
            : x;

    function testDeepCopy() {
        const obj = {a: 1, b: {c: 2}};
        const copy = deepCopy(obj);
        console.assert(copy !== obj);
        console.assert(copy.b !== obj.b);
        console.assert(copy.b.c === obj.b.c);
    }
</script>
</body>
</html>